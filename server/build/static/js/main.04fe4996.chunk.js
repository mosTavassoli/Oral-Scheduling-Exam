(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,a){e.exports=a(179)},108:function(e,t,a){},110:function(e,t,a){},179:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),s=a.n(l),u=(a(105),a(106),a(107),a(108),a(26)),c=a(9),o=a.n(c),i=a(11),m=a(17),d=a(18),h=a(20),p=a(19),E=(a(110),a(48)),f=a(185),v=a(186),b=a(91),x=a(205),g=a(92),S=a(93),k=a(187),y=a(15),O=r.a.createContext({authUser:{}}),C="teacher",w="student",j=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",role:C,submitted:!1,error:"",has_error:!1},n.handleInputChange=n.handleInputChange.bind(Object(E.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(E.a)(n)),n}return Object(d.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(u.a)({},n,a))}},{key:"handleSubmit",value:function(e,t){e.preventDefault(),t(this.state.username,this.state.password,this.state.role)}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.authUser&&r.a.createElement(y.a,{to:"/home"}),r.a.createElement(f.a,{fluid:!0,className:"center center mt-5"},r.a.createElement(v.a,null,r.a.createElement(b.a,{md:{span:4,offset:4}},r.a.createElement("h3",null," Select your Role: "),r.a.createElement(x.a,{method:"POST",onSubmit:function(a){return e.handleSubmit(a,t.loginUser)}},r.a.createElement(g.a,null,r.a.createElement("select",{className:"form-control",role:e.state.role,onChange:e.handleInputChange,name:"role"},r.a.createElement("option",{value:"teacher"},"Teacher"),r.a.createElement("option",{value:"student"},"Student"))),e.state.role===C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(S.a,{type:"text",id:"username",name:"username",placeholder:"Username",value:e.state.username,onChange:e.handleInputChange,required:!0,autoFocus:!0})),r.a.createElement(g.a,null,r.a.createElement(S.a,{type:"password",id:"password",name:"password",placeholder:"Password",value:e.state.password,onChange:e.handleInputChange,required:!0}))),e.state.role===w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(S.a,{type:"text",id:"username",name:"username",placeholder:"Student ID",value:e.state.username,onChange:e.handleInputChange,required:!0,autoFocus:!0}))),r.a.createElement(g.a,null,r.a.createElement(k.a,{variant:"primary",type:"submit",color:"primary"},"Login")))))))}))}}]),a}(r.a.Component),N=a(188),T=a(189),R=a(190),D=a(191),I=a(192),L=a(22),B=function(e){return r.a.createElement(O.Consumer,null,(function(t){return r.a.createElement(r.a.Fragment,null,t.authUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{light:!0,expand:"md"},r.a.createElement("div",{className:"container"},r.a.createElement(T.a,{onClick:e.toggleNav}),r.a.createElement(R.a,{isOpen:e.isNavOpen,navbar:!0},r.a.createElement(D.a,{navbar:!0},t.authUser.role===C&&r.a.createElement(I.a,null,r.a.createElement(L.c,{className:"nav-link",to:"/home"},"Home")),t.authUser.role===C&&r.a.createElement(I.a,null,r.a.createElement(L.c,{className:"nav-link",to:"/exam/create"},"Create Exam")),t.authUser.role===C&&r.a.createElement(I.a,null,r.a.createElement(L.c,{className:"nav-link",to:"/exam/execute"},"Execute Exam")),t.authUser.role===C&&r.a.createElement(I.a,null,r.a.createElement(L.c,{className:"nav-link",to:"/exam/showreport"},"Show Report")),r.a.createElement(I.a,null,r.a.createElement(L.c,{className:"nav-link",to:"/logout",onClick:function(){return t.logoutUser()}},"Logout"))))))):r.a.createElement(r.a.Fragment,null))}))},U=a(34),F=a(49),_=a(201),M=a(204),G=a(206),H=a(193),P=a(194),A=a(195),W=a(196),z=a(197),q=a(198),J=a(199),Y=a(200),Q=a(94),$=a.n(Q),K=a(39),V=a.n(K),X=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).dateChangeHandler=function(e,t){n.setState(Object(u.a)({},t,e))},n.handleInputChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(u.a)({},r,a))},n.handleCreateSession=function(e){e.preventDefault(),n.props.toggleModal();var t=Object.assign({},n.state);t.date=n.state.date,n.props.slotGenerator(t)},n.state={date:K().toDate(),startingTime:"",totalDuration:""},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{toggle:this.props.toggleModal,isOpen:this.props.isModalOpen},r.a.createElement(H.a,{toggle:this.props.toggleModal},"Create Session"),r.a.createElement(P.a,null,r.a.createElement(A.a,{onSubmit:this.handleCreateSession},r.a.createElement(W.a,null,r.a.createElement(z.a,{htmlFor:"date"},"Date : ","\xa0"," "),r.a.createElement($.a,{className:"form-control",selected:this.state.date,onChange:function(t){return e.dateChangeHandler(t,"date")},dateFormat:"yyyy/MM/dd",minDate:new Date})),r.a.createElement(W.a,null,r.a.createElement(z.a,{htmlFor:"startingTime"},"Starting Time :"),r.a.createElement(q.a,{type:"time",id:"startingTime",name:"startingTime",value:this.state.startingTime,onChange:this.handleInputChange,required:!0})),r.a.createElement(W.a,null,r.a.createElement(z.a,{htmlFor:"date"},"Total Duration :"),r.a.createElement(q.a,{type:"text",id:"totalduration",name:"totalDuration",value:this.state.totalDuration,onChange:this.handleInputChange,required:!0})),this.state.totalDuration%this.props.duration===0?r.a.createElement(J.a,{type:"submit",value:"submit",color:"primary"},"Create"):r.a.createElement(Y.a,{variant:"info"},r.a.createElement("p",null,'This Number must be multiple of "duration of each Slot"')))))}}]),a}(r.a.Component);function Z(){return(Z=Object(i.a)(o.a.mark((function e(t,a,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a,role:n})}).then((function(t){t.ok?t.json().then((function(t){e(t)})):t.json().then((function(e){r(e)})).catch((function(e){r({errors:[{param:"Application",msg:"Cannot parse server response"}]})}))})).catch((function(e){r({errors:[{param:"Server",msg:"Cannot communicate"}]})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){fetch("/api/logout",{method:"POST"}).then((function(a){a.ok?e(null):a.json().then((function(e){t(e)})).catch((function(e){t({errors:[{param:"Application",msg:"Cannot parse server response"}]})}))}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){return(te=Object(i.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/verify"));case 2:return t=e.sent,e.next=5,t.json();case 5:if(a=e.sent,!t.ok){e.next=10;break}return e.abrupt("return",a);case 10:throw{status:t.status,errObj:a};case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/studentLists"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.log("Error",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function ne(){return(ne=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/saveExam"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({payLoad:t})});case 2:return a=e.sent,console.log("save exams",a),e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/examLists"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.log("Error",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function le(){return(le=Object(i.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/teacherExamSlots/").concat(t,"?date=").concat(a));case 3:if(!(n=e.sent).ok){e.next=8;break}return e.abrupt("return",n.json());case 8:return e.abrupt("return",[]);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(0),console.log("Error",e.t0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function se(){return(se=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/updateGrade"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({payLoad:t})});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/exam/getFullreport"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function ce(){return(ce=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/exam/getStudentNotBooked"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function oe(){return(oe=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/studentExams"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function ie(){return(ie=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/reservedExams"));case 3:if(!(t=e.sent).ok){e.next=8;break}return e.abrupt("return",t.json());case 8:return e.abrupt("return",[]);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function me(){return(me=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api","/examSlots/").concat(t));case 3:if(!(a=e.sent).ok){e.next=8;break}return e.abrupt("return",a.json());case 8:return e.abrupt("return",[]);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function de(){return(de=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/examSlots/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/api","/deleteExamSlots/").concat(t.id,"?exam_no=").concat(t.exam_no),{method:"PUT",headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pe={userLogin:function(e,t,a){return Z.apply(this,arguments)},userLogout:function(){return ee.apply(this,arguments)},isAuthenticated:function(){return te.apply(this,arguments)},getStudentLists:function(){return ae.apply(this,arguments)},saveExam:function(e){return ne.apply(this,arguments)},getExamLists:function(){return re.apply(this,arguments)},getTeacherSlots:function(e,t){return le.apply(this,arguments)},updateGrade:function(e){return se.apply(this,arguments)},getStudentExams:function(){return oe.apply(this,arguments)},getReservedExams:function(){return ie.apply(this,arguments)},getExamSlots:function(e){return me.apply(this,arguments)},reservingSlot:function(e){return de.apply(this,arguments)},cancelExam:function(e){return he.apply(this,arguments)},getFinalResultReport:function(){return ue.apply(this,arguments)},getstudentNotBooked:function(){return ce.apply(this,arguments)}},Ee=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleModal=function(){n.setState({isModalOpen:!n.state.isModalOpen,disabledInputDuration:!0})},n.onCheckChange=function(e,t){var a=e.target,r="checkbox"===a.type?a.checked:a.value,l=a.name;if(n.setState(Object(u.a)({},l,r)),"checkbox"===a.type)if(!0===r)n.setState((function(e){return{totalNumberOfStudents:e.totalNumberOfStudents+1,studentsId:[].concat(Object(F.a)(e.studentsId),[t])}}));else{var s=n.state.studentsId.indexOf(t);n.setState((function(e){return{totalNumberOfStudents:e.totalNumberOfStudents-1,studentsId:n.state.studentsId.filter((function(e,t){return t!==s}))}}))}},n.handleCreateSession=function(e){e.preventDefault(),n.toggleModal()},n.slotGenerator=function(e){var t=e.totalDuration,a=e.startingTime,r=e.date;n.setState({startTime:a,totalDuration:t,date:r});var l=t/n.state.duration;n.setState((function(e){return{totalNumberOfSlots:e.totalNumberOfSlots+t/n.state.duration}}));for(var s=V()(e.startingTime,"h:mmA"),u=[],c=0;c<l;c++){var o=s.add(n.state.duration,"minutes").format("hh:mm A"),i=s.subtract(n.state.duration,"minutes").format("hh:mm A");s=s.add(n.state.duration,"minutes"),u.push({start_time:i,end_time:o,date:e.date})}var m=Object(U.a)({},n.state.sessions);m[n.state.lastSession]=u,n.setState({sessions:Object(U.a)({},m),lastSession:n.state.lastSession+1})},n.saveExamHandler=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({examHasBeenCreated:!0,payload:{date:n.state.dates,studentIds:n.state.studentsId,totalDuration:n.state.duration,durationTime:n.state.sessions}},Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.saveExam(n.state.payload);case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.state={examHasBeenCreated:!1,isModalOpen:!1,totalNumberOfStudents:0,duration:"",totalNumberOfSlots:0,disabledInputDuration:!1,startStopTime:[],studentsId:[],startTime:"",totalDuration:"",sessions:{},dates:{},lastSession:1,payload:{studentIds:[],date:[],totalDuration:"",durationTime:[],startTime:""}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.studentLists()}},{key:"render",value:function(){var e=this;return this.state.examHasBeenCreated?r.a.createElement(y.a,{to:"/home"}):r.a.createElement(O.Consumer,null,(function(t){var a;return r.a.createElement(r.a.Fragment,null,null===t.authUser&&r.a.createElement(y.a,{to:"/login"}),r.a.createElement(f.a,{fluid:!0},r.a.createElement(v.a,null,r.a.createElement(b.a,{md:8},r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"mt-5"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Student Number"),r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Select"))),r.a.createElement("tbody",null,null===(a=e.props.teacherStudentLists)||void 0===a?void 0:a.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.id),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.name),r.a.createElement("td",null,r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Check,{onChange:function(a){return e.onCheckChange(a,t.id)},type:"checkbox",name:"checkbox"}))))}))))),r.a.createElement(b.a,{md:4,className:"mt-5"},r.a.createElement(x.a,{onSubmit:function(e){e.preventDefault()}},r.a.createElement(x.a.Group,null,r.a.createElement(x.a.Label,{column:!0,htmlFor:"duration"},"Duration of Each Slot (in Minute)"),r.a.createElement(b.a,{sm:10},r.a.createElement(x.a.Control,{value:e.state.duration,onChange:e.onCheckChange,id:"lastname",size:"sm",name:"duration",placeholder:"Duration",disabled:e.state.disabledInputDuration,required:!0,autoFocus:!0,type:"number"}))),r.a.createElement("p",null,"The Number of Selected Students :    ".concat(e.state.totalNumberOfStudents)),r.a.createElement("p",null,"The Number of defined Slots :    ".concat(e.state.totalNumberOfSlots)),r.a.createElement(g.a,null,r.a.createElement(k.a,{variant:"info",size:"sm",className:"fixed-right-bottom",onClick:e.toggleModal,disabled:!e.state.duration},"Create Session")),r.a.createElement(g.a,null,r.a.createElement(k.a,{variant:"info",size:"sm",className:"fixed-right-bottom",onClick:e.saveExamHandler,disabled:!e.state.totalNumberOfStudents||!e.state.totalNumberOfSlots||!(e.state.totalNumberOfSlots>=e.state.totalNumberOfStudents)},"Save Exam")),e.state.totalNumberOfSlots>=e.state.totalNumberOfStudents?r.a.createElement(r.a.Fragment,null):r.a.createElement(M.a,{variant:"danger"},r.a.createElement(M.a.Heading,null,"ERROR!"),r.a.createElement("p",null,"The Number Of Slots are lower than the Number Of Students. ",r.a.createElement("br",null),"You need","\xa0",e.state.totalNumberOfStudents-e.state.totalNumberOfSlots,"\xa0","extra Slots. Please create more Slots."))),e.state.isModalOpen&&r.a.createElement(X,{isModalOpen:e.state.isModalOpen,toggleModal:e.toggleModal,handleCreateSession:e.handleCreateSession,slotGenerator:e.slotGenerator,duration:e.state.duration})))))}))}}]),a}(r.a.Component),fe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).executeExamHandler=function(e,t){n.setState({exam_no:e,date:t}),n.props.getTeacherSlots(e,t,!0)},n.state={exam_no:"",date:""},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.getExamtLists()}},{key:"render",value:function(){var e=this;return this.state.exam_no?r.a.createElement(y.a,{to:"/exams/slots?exam_no=".concat(this.state.exam_no)}):r.a.createElement(O.Consumer,null,(function(t){var a;return r.a.createElement(r.a.Fragment,null,null===t.authUser&&r.a.createElement(y.a,{to:"/login"}),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(b.a,{md:12},0!==e.props.len?r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"mt-5"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exam Number"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Select"))),r.a.createElement("tbody",null,null===(a=e.props.examLists)||void 0===a?void 0:a.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.exam_no),r.a.createElement("td",null,t.date),r.a.createElement("td",null,r.a.createElement(x.a.Group,{controlId:""},r.a.createElement(k.a,{onClick:function(){return e.executeExamHandler(t.exam_no,t.date)},name:"execute",className:"btn btn-primary"},"Execute"))))})))):r.a.createElement("p",{className:"d-flex justify-content-center text-danger display-5 mt-5"},"There is no Exam to execute")))))}))}}]),a}(r.a.Component),ve=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e,t){t.preventDefault();var a=t.target.value,r=n.state.examId.indexOf(e);switch(a){case"fail":a=-1;break;case"withdraw":a=-2;break;case"absent":a=-3;break;case"none":n.setState({counter:n.state.counter-1,grade:n.state.grade.filter((function(e,t){return t!==r})),examId:n.state.examId.filter((function(e,t){return t!==r}))});break;default:a=parseInt(a)}var l=n.state.grade;-1!==r&&"none"!==a?(l[r]=a,n.setState({grade:l})):"none"!==a&&n.setState((function(t){return{examId:[].concat(Object(F.a)(t.examId),[e]),grade:[].concat(Object(F.a)(t.grade),[a]),counter:n.state.counter+1}}))},n.saveExamHandler=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({submitted:!n.state.submitted,payload:{grades:n.state.grade,examIds:n.state.examId}},Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.updateGrade(n.state.payload);case 2:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),n.state=Object(U.a)(Object(U.a)({},e),{},{submitted:!1,counter:0,grade:[],examId:[],payload:{grades:[],examIds:[]}}),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.isExecuteButtonClick||this.props.getTeacherSlots(window.location.href.split("=")[1])}},{key:"render",value:function(){var e=this;return this.state.submitted?r.a.createElement(y.a,{to:"/home"}):r.a.createElement(O.Consumer,null,(function(t){var a;return r.a.createElement(r.a.Fragment,null,null===t.authUser&&r.a.createElement(y.a,{to:"/login"}),r.a.createElement(f.a,null,r.a.createElement(v.a,null,r.a.createElement(b.a,{md:10},r.a.createElement(_.a,{striped:!0,bordered:!0,hover:!0,size:"sm",className:"mt-5"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exam Number"),r.a.createElement("th",null,"Student Number"),r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Duration"),r.a.createElement("th",null,"Start Time"),r.a.createElement("th",null,"End Time"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Grade"))),r.a.createElement("tbody",null,null===(a=e.props.teacherSlots)||void 0===a?void 0:a.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.exam_no),r.a.createElement("td",null,t.username),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.duration),r.a.createElement("td",null,t.start_time),r.a.createElement("td",null,t.end_time),r.a.createElement("td",null,t.date),r.a.createElement("td",null,r.a.createElement(g.a,null,r.a.createElement("select",{value:e.state.value,size:"sm",className:"form-control ",name:"grade",onChange:function(a){return e.handleInputChange(t.id,a)}},r.a.createElement("option",{value:"none"},"Select Option"),r.a.createElement("option",{value:"fail"},"Fail"),r.a.createElement("option",{value:"withdraw"},"Withdraw"),r.a.createElement("option",{value:"absent"},"Absent"),r.a.createElement("option",{value:"18"},"18"),r.a.createElement("option",{value:"19"},"19"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"21"},"21"),r.a.createElement("option",{value:"22"},"22"),r.a.createElement("option",{value:"23"},"23"),r.a.createElement("option",{value:"24"},"24"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"26"},"26"),r.a.createElement("option",{value:"27"},"27"),r.a.createElement("option",{value:"28"},"28"),r.a.createElement("option",{value:"29"},"29"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"31"},"31")))))}))))),r.a.createElement(b.a,{md:2},r.a.createElement(g.a,null,r.a.createElement(k.a,{className:"mt-5",variant:"primary",type:"submit",color:"primary",onClick:e.saveExamHandler,disabled:e.state.counter!==e.props.length},"Save Grades"))))))}))}}]),a}(r.a.Component),be=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,(function(t){var a;return r.a.createElement(f.a,null,r.a.createElement("h2",{className:"mt-5 , mb-5"},"Welcome Prof. ",null===(a=t.authUser)||void 0===a?void 0:a.name),r.a.createElement(v.a,null,r.a.createElement(b.a,{md:{span:4,offset:4}},r.a.createElement(x.a,null,r.a.createElement(g.a,null,r.a.createElement(L.b,{onClick:e.handleClick,width:"80",key:"1",to:{pathname:"/exam/create"},className:"btn btn-primary w-100"},"Create Exam")),r.a.createElement(g.a,null,r.a.createElement(L.b,{to:{pathname:"/exam/execute"},className:"btn btn-primary w-100"},"Execute Exam")),r.a.createElement(g.a,null,r.a.createElement(L.b,{to:{pathname:"/exam/showreport"},className:"btn btn-primary w-100"},"Show Report"))))))}))}}]),a}(r.a.Component),xe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleCancelReservation=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.cancelExam(t);case 2:(a=n.props.listStudentExams.filter((function(e){return e.exam_no!==t.exam_no}))).push(Object(U.a)({},t)),r=(r=n.props.listReservedExams).filter((function(e){return e.id!==t.id})),n.props.updateState("listStudentExams",a),n.props.updateState("listReservedExams",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.studentExams(),this.props.reservedExams()}},{key:"gradeConversion",value:function(e){var t=e;switch(t){case-1:return"Fail";case-2:return"Withdraw";case-3:return"Absent";case 31:return"30L";default:return e}}},{key:"renderCancelButton",value:function(e){var t=this;return V()().isSameOrAfter(e.date)||null!==e.grade?r.a.createElement("p",null,"Not possible to cancel the exam"):r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return t.handleCancelReservation(e)}},"Cancel")}},{key:"renderExams",value:function(){var e=this,t=this.props.listStudentExams.length;return 0===t?r.a.createElement("h5",{className:"mt-5"},"Ooops There are no exams assigned to you to reserve OR you missed deadline (deadline is a day before the exam's first session date) !!!!!"):r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"There are ",t," exams assigned to you"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exam Title"),r.a.createElement("th",null,"Exam Number"),r.a.createElement("th",null,"Reserve the exam"))),r.a.createElement("tbody",null,this.props.listStudentExams.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.exam_no),r.a.createElement("td",null,r.a.createElement(k.a,{key:a,onClick:function(){return e.props.handleReserve(t.exam_no,!0)},width:"40",className:"btn btn-primary w-50"},"Reserve Exam")))})))))}},{key:"renderReserveredExams",value:function(){var e=this,t=this.props.listReservedExams.length;return 0===t?r.a.createElement("h5",{className:"mt-5"},"There are no reserved exams "):r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"You have ",t," reserved exams"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Exam title"),r.a.createElement("td",null,"Date"),r.a.createElement("td",null,"Start Time"),r.a.createElement("td",null,"End Time"),r.a.createElement("td",null,"Grade"),r.a.createElement("td",null,"Cancel the exam"))),r.a.createElement("tbody",null,this.props.listReservedExams.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.start_time),r.a.createElement("td",null,t.end_time),r.a.createElement("td",null,e.gradeConversion(t.grade)),r.a.createElement("td",null,e.renderCancelButton(t)))})))))}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,(function(t){var a;return r.a.createElement(f.a,null,r.a.createElement("h2",{className:"mt-5  mb-5"},"Welcome Student. ",null===(a=t.authUser)||void 0===a?void 0:a.name," "),r.a.createElement("div",null,r.a.createElement("div",null,e.renderExams()),r.a.createElement("div",null," ",e.renderReserveredExams())))}))}}]),a}(n.Component),ge=a(202),Se=a(203),ke=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handlerSelect=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({selectedSlot:t,buttonDisabled:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handlersave=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.reservingSlot(n.state.selectedSlot.id);case 2:n.setState({redirect:!0});case 3:case"end":return e.stop()}}),e)}))),n.state={selectedSlot:{},buttonDisabled:!0,mounted:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.isReservedButtonClick||this.props.handleReserve(window.location.href.split("=")[1])}},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(y.a,{push:!0,to:"/student"}):r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Start Time"),r.a.createElement("th",null,"Choose.."))),r.a.createElement("tbody",null,this.props.listSlots.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.start_time),r.a.createElement("td",null,r.a.createElement("input",{onChange:function(){return e.handlerSelect(t)},className:"form-check-input",type:"radio",name:"exampleRadios",id:"exampleRadios1",value:"option1"})))})))),r.a.createElement(ge.a,null,r.a.createElement(Se.a,null,r.a.createElement("button",{onClick:this.handlersave,disabled:this.state.buttonDisabled,className:"btn btn-primary w-30  "},"Save")),r.a.createElement(Se.a,null,r.a.createElement(L.b,{width:"40",key:"1",to:{pathname:"/student/"},className:"btn btn-danger w-30"},"Cancel")))))}}]),a}(n.Component),ye=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.finalResultReport(),this.props.studentNotBooked()}},{key:"gradeConversion",value:function(e){var t=e;switch(t){case-1:return"Fail";case-2:return"Withdraw";case-3:return"Absent";case 31:return"30L";default:return e}}},{key:"renderFinalResult",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"There is a list of the final report of exam and student grade."),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exam Number"),r.a.createElement("th",null,"Course name"),r.a.createElement("th",null,"Start Time"),r.a.createElement("th",null,"End Time"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Grade"))),r.a.createElement("tbody",null,this.props.fullReports.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.exam_no),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.start_time),r.a.createElement("td",null,t.end_time),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.username),r.a.createElement("td",null,e.gradeConversion(t.grade)),r.a.createElement("td",null))})))))}},{key:"studentNotBooked",value:function(){return r.a.createElement("div",null,r.a.createElement("h5",{className:"mt-5"},"There is a list of student that did not book the exam."),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exam Number"),r.a.createElement("th",null,"Student Name"),r.a.createElement("th",null,"Student Username"))),r.a.createElement("tbody",null,this.props.listStudentsNotBooked.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.exam_no),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.username),r.a.createElement("td",null))})))))}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement("div",null,r.a.createElement("div",null,this.renderFinalResult()),r.a.createElement("div",null,this.studentNotBooked())))}}]),a}(n.Component),Oe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).toggleNav=function(){n.setState({isNavOpen:!n.state.isNavOpen})},n.logout=function(){return pe.userLogout().then((function(){n.setState({authUser:null,authErr:null}),n.props.history.push("/login")}))},n.login=function(e,t,a){return pe.userLogin(e,t,a).then((function(e){e.role===C?(n.setState({authUser:e,authErr:null}),n.props.history.push("/home"),n.setState({role:n.state.authUser.role})):e.role===w&&(n.setState({authUser:e,authErr:null}),n.props.history.push("/student"),n.setState({role:n.state.authUser.role}))})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2500)}))},n.studentLists=function(){pe.getStudentLists().then((function(e){return n.setState({teacherStudentLists:e||[]})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.examLists=function(){pe.getExamLists().then((function(e){return n.setState({examLists:e||[]})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.finalResultReport=function(){pe.getFinalResultReport().then((function(e){n.setState({fullReports:e})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.getTeacherSlots=function(){var e=Object(i.a)(o.a.mark((function e(t,a,r){var l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isExecuteButtonClick:r}),e.next=3,pe.getTeacherSlots(t,a);case 3:l=e.sent;try{setTimeout((function(){n.setState({isExecuteButtonClick:!1})}),200),n.setState({teacherSlots:l||[]})}catch(s){n.setState({err:s.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.studentNotBooked=function(){pe.getstudentNotBooked().then((function(e){n.setState({listStudentsNotBooked:e})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.studentExams=function(){pe.getStudentExams().then((function(e){n.setState({listStudentExams:e})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.reservedExams=function(){pe.getReservedExams().then((function(e){n.setState({listReservedExams:e})})).catch((function(e){n.setState({err:e.errors[0].msg}),setTimeout((function(){n.setState({err:""})}),2e3)}))},n.handleReserve=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isReservedButtonClick:a}),e.next=3,pe.getExamSlots(t);case 3:r=e.sent,setTimeout((function(){n.setState({isReservedButtonClick:!1})}),200),n.setState({listSlots:r}),n.props.history.push("/student/reserve?exam_no=".concat(t));case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.updateState=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState(Object(u.a)({},t,a));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={err:"",isNavOpen:!1,isReservedButtonClick:!1,isExecuteButtonClick:!1,teacherStudentLists:[],examLists:[],teacherSlots:[],role:"",listStudentExams:[],listReservedExams:[],listSlots:[],fullReports:[],listStudentsNotBooked:[]},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;pe.isAuthenticated().then((function(t){e.setState({authUser:t})})).catch((function(t){e.props.history.push("/login"),e.setState({authErr:t.errorObj}),setTimeout((function(){e.setState({err:""})}),2e3)}))}},{key:"getQueryParam",value:function(){return this.props}},{key:"render",value:function(){var e={authUser:this.state.authUser,authErr:this.state.authErr,loginUser:this.login,logoutUser:this.logout};return r.a.createElement(O.Provider,{value:e},r.a.createElement(B,{isNavOpen:this.state.isNavOpen,toggleNav:this.toggleNav,role:this.state.role}),r.a.createElement(f.a,{fluid:!0},r.a.createElement(y.d,null,r.a.createElement(y.b,{path:"/home",component:be}),r.a.createElement(y.b,{path:"/login",component:j}),r.a.createElement(y.b,{path:"/exam/create"},r.a.createElement(Ee,{studentLists:this.studentLists,teacherStudentLists:this.state.teacherStudentLists})),r.a.createElement(y.b,{path:"/exam/execute"},r.a.createElement(fe,{getExamtLists:this.examLists,examLists:this.state.examLists,len:this.state.examLists.length,getTeacherSlots:this.getTeacherSlots,teacherSlots:this.state.teacherSlots})),r.a.createElement(y.b,{path:"/exams/slots"},r.a.createElement(ve,{getTeacherSlots:this.getTeacherSlots,teacherSlots:this.state.teacherSlots,length:this.state.teacherSlots.length,isExecuteButtonClick:this.state.isExecuteButtonClick})),r.a.createElement(y.b,{path:"/exam/showreport"},r.a.createElement(ye,{fullReports:this.state.fullReports,finalResultReport:this.finalResultReport,studentNotBooked:this.studentNotBooked,listStudentsNotBooked:this.state.listStudentsNotBooked})),r.a.createElement(y.b,{path:"/student/reserve"},r.a.createElement(ke,{listSlots:this.state.listSlots,handleReserve:this.handleReserve,isReservedButtonClick:this.state.isReservedButtonClick})),r.a.createElement(y.b,{path:"/student"},r.a.createElement(xe,{listStudentExams:this.state.listStudentExams,listReservedExams:this.state.listReservedExams,studentExams:this.studentExams,reservedExams:this.reservedExams,handleReserve:this.handleReserve,updateState:this.updateState})),r.a.createElement(y.b,{path:"/logout"}),r.a.createElement(y.a,{from:"/",exact:!0,to:"login"}))),r.a.createElement(v.a,null,r.a.createElement(b.a,{md:4}),r.a.createElement(b.a,{md:4},this.state.err?r.a.createElement(M.a,{variant:"danger"},r.a.createElement(M.a.Heading,null,"Warning !"),r.a.createElement("p",{className:""},this.state.err)):r.a.createElement(r.a.Fragment,null))))}}]),a}(r.a.Component),Ce=Object(y.g)(Oe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(Ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[100,1,2]]]);
//# sourceMappingURL=main.04fe4996.chunk.js.map